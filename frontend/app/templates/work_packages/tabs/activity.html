  <exclusive-edit>
    <div class="detail-activity">
      <ul class="work-package-details-activities-list">
        <li ng-repeat="activity in activities"
            class="work-package-details-activities-activity"
            ng-init="activityNo    = activitiesSortedInDescendingOrder && activities.length - $index || $index + 1;
                     isInitial     = activityNo == 1;
                     currentDate   = (activity.props.createdAt|date:'longDate');
                     currentAnchor = 'note-' + activityNo">
          <h3 class="activity-date"
              ng-if="currentDate !== (activities[$index-1].props.createdAt | date:'longDate')"
              ng-bind="currentDate"/>
          <div ng-switch="activity.props._type">
            <revision-activity work-package="workPackage"
                           activity="activity"
                           activity-no="activityNo"
                           ng-switch-when="Revision">
            </revision-activity>
            <user-activity work-package="workPackage"
                      activity="activity"
                      activity-no="activityNo"
                      is-initial="isInitial"
                      ng-switch-default
                      input-element-id="'add-comment-text'">
            </user-activity>
          </div>
        </li>
      </ul>
    </div>
    <activity-comment work-package="workPackage"
                      activities="activities">
    </activity-comment>
  </exclusive-edit>
